{
  "hash": "5886715de3e63200e7f4b0e760afae1f",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"r package development\"\ndate: 2/24/2025\ndescription: \"improvemnt as a programmer\"\nformat:\n  html:\n    css: styles.css\n    code-fold: false\n    code-tools: true\n    code-overflow: wrap\n    code-line-numbers: false\n#doi:\ncitation: true\ndraft: false\n---\n\n\n\n\n\n## what are packages?\n\nR packages are collections of code, data, and documentation that extend R's functionality beyond its core features. If you have an idea or notice a gap in the existing ecosystem, you can develop a package, test it, document it, and share it with the broader R community. You can distribute your package through the Comprehensive R Archive Network (CRAN)^[CRAN reviews all submitted packages and distributes them as precompiled binaries] ([CRAN](https://cran.r-project.org/)) or [GitHub](https://github.com/). \n\n## how to create a package\n\nAll you need (assuming you already know some R) is a solid idea or concept that interests you. Take the time to clarify your idea—what problem does your package solve? How will it be useful? Even if it’s just for you, that’s a great start.\n\nNext, break the problem into steps and outline the primary functions you’ll need. Begin by creating a project folder to serve as the foundation of your package. Your functions will likely evolve as you refine them, but starting with a basic structure will help keep your development process organized.\n\n### an intermesso on r projects\n\nAlways use [RStudio projects](https://support.posit.co/hc/en-us/articles/200526207-Using-RStudio-Projects)! This is just my opinion, but a well-founded one. RStudio projects, combined with the [`here`](https://here.r-lib.org/) and [`renv`](https://rstudio.github.io/renv/index.html) packages, will save you countless headaches. Together, they help keep your code reproducible and shareable in a structured environment.\n\nAlso, consider disabling the option to save your workspace on exit. It often leads to unnecessary clutter and can slow things down, especially when working with large datasets. ^[How large is \"large\"? That depends on your RAM.]\n\n## back to creating packages\n\nYour functions will likely evolve, merge, or be rewritten entirely as your package matures. That's okay. Most ideas need refinement through trial and error in an isolated environment—your R session—before they’re ready for the world. Stay flexible and be willing to adjust your approach as you develop your package.\n\nTo deepen your understanding of package development, you don’t need a Coursera® certificate. Instead, focus on mastering the fundamentals of R programming and, most importantly, read [R packages](https://r-pkgs.org/) by Hadley Wickham and Jennifer Bryan. It’s short, informative, and packed with insights that will save you time and frustration.\n\n### documenting your functions\n\nAs you build and modify your functions, document them! Make notes on what each function does, its arguments, and any important details. This will form the basis of your formal documentation later.\n\nOne of my favorite shortcuts is using ChatGPT® to generate `roxygen2` documentation. I provide a brief explanation of what my function does, a summary of its arguments, and the function code, then ask ChatGPT® to generate the `roxygen2` documentation. This saves time—but be warned: ChatGPT® has a habit of \"hallucinating,\" so always review its output carefully.\n\n### write formal tests\n\nWhile it’s natural to test functions informally in the console, you should also create automated tests to verify their correctness in various scenarios. While I'm not entirely sure if CRAN requires formal tests for all user-facing functions, I totally recommend using the `testthat` package to create these automated tests.\n\n## regularly check your progress\n\n> If it hurts, do more of it. — Joko Willink\n\nRun `devtools::check()` regularly throughout the development process. It’s much easier to fix a few small issues as they arise than to deal with a mountain of errors all at once. Frequent checks will make your package better, reduce frustration for the [CRAN reviewers](https://cran.r-project.org/CRAN_team.htm), and improve the experience for your future users.\n\nEven if you're only sharing it on GitHub, always check your package. Your goal should be to provide users with a solid, well-tested, and reliable tool free of logical or implementation errors. \n\n## release it to the world\n\nOnce you’ve triple-checked (and quadruple-checked) your package and resolved all warnings and notes^[Some notes are unavoidable—new packages, for example, always receive a maintainer-related note that can’t be resolved.], you’re ready to submit to CRAN.\n\nBe prepared to communicate with CRAN reviewers and check your email regularly. The submission process can involve some back-and-forth, so try to be patient as you work to get your package on CRAN.\n\n## personal experience\n\nWhat I have described here is based on my personal experience developing R packages. I've released three packages to CRAN, `despair`,`matriz`, and `logos`. \n\nThe [`despair`](https://despair.jpmonteagudo.com/) package was a purely fun and silly desire to create (de)motivational quotes and codenames called `bard.bits` that could be used as code names. \n\nThe [`matriz`](https://matriz.jpmonteagudo.com/index.html) Born out of necessity, this package automates the creation, editing, deletion, and updating of literature matrices and BibTeX references. I built it because my research methods class required us to create literature matrices by hand in Excel®, which was painfully tedious.\n\nThe [`logos`](https://logos.jpmonteagudo.com/) package introduces the writings of the Old and New testament in English, Greek and Hebrew to the R community after realizing they were not available on CRAN or GitHub. ^[the Mormon scriptures have been bundled into a package by [Andrew Heiss](https://github.com/andrewheiss/scriptuRs)] I only realized this gap because, in an attempt to do textual analysis on the gospel of John in its original language, I discovered publicly available biblical data was scarce within the R community. \n\nI’ve also worked on other packages available on my GitHub profile. Some are still works in progress, but if you’re interested in any of them, you can install devtools and download them directly from GitHub.\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndevtools::instal_github(\"jpmonteagudo28/matriz\", \"jpmonteagudo28/despair\",\"jpmonteagudo28/logos\")\n```\n:::\n\n\n\nHere's how to install the three packages from CRAN:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n\ninstall.packages(c(\"logos\",\"matriz\",\"despair\"))\n# Downloading packages -------------------------------------------------------\n# - Downloading logos from CRAN ...               OK [3.2 Mb in 0.77s]\n# - Downloading matriz from CRAN ...              OK [378.5 Kb in 0.65s]\n# - Downloading writexl from CRAN ...             OK [198.4 Kb in 0.54s]\n# - Downloading despair from CRAN ...             OK [113.6 Kb in 0.53s]\n# Successfully downloaded 4 packages in 5.7 seconds.\n# \n# The following package(s) will be installed:\n# - despair [0.1.1]\n# - logos   [0.1.0]\n# - matriz  [1.0.1]\n# - writexl [1.5.1]\n# These packages will be installed into \"C:/Users/yourname/folder/\".\n# \n# Do you want to proceed? [Y/n]: y\n# \n# # Installing packages --------------------------------------------------------\n# - Installing logos ...                          OK [installed binary and cached in 0.92s]\n# - Installing writexl ...                        OK [installed binary and cached in 0.57s]\n# - Installing matriz ...                         OK [installed binary and cached in 0.57s]\n# - Installing despair ...                        OK [installed binary and cached in 0.55s]\n# Successfully installed 4 packages in 2.8 seconds.\n\n```\n:::\n\n\n\n\nA taste of `despair`:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(despair)\n\n# set a reproducible character seed\nsad_seed <- set.char.seed(\"an ugly horse parade\")\n\n# let the demotivation rain\ndemotivate(cat = \"work\", seed = sad_seed)\n#> [1] \"Monday is an awful way to spend 1/7th of your life.\"\n\n# Let's now boost your ego…perhaps\nmotivate(cat = \"stoic\",seed = sad_seed)\n#> [1] \"Difficulties strengthen the mind, as labor does the body. - Seneca\"\n\n# Now come up with a funny Shakesperean code name for a project\nbard.bits(cat = \"dsm_5\", seed = sad_seed)\n#> [1] \"critical starling\"\n```\n:::\n\n\n\n\nHere's the logos package in action:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n\nlibrary(logos)\n\nselect_passage(\"Jhn\",chapter = 1,verse = 1:6, language = \"English\",testament = \"new\")\n#> [1] \"In the beginning was the Word, and the Word was with God, and the Word was God.\"              \"The same was in the beginning with God.\"                                                      \"All things were made through him; and without him was not anything made that hath been made.\"\n#> [4] \"In him was life; and the life was the light of men.\"                                          \"And the light shineth in the darkness; and the darkness apprehended it not.\"                  \"There came a man, sent from God, whose name was John.\"\n\n# now in Greek\nselect_passage(\"Jhn\",chapter = 1,verse = 1:6, language = \"Greek\",testament = \"new\")\n#> [1] \"Ἐν ἀρχῇ ἦν ὁ λόγος, καὶ ὁ λόγος ἦν πρὸς τὸν θεόν, καὶ θεὸς ἦν ὁ λόγος. \" \"οὗτος ἦν ἐν ἀρχῇ πρὸς τὸν θεόν. \"                                        \"πάντα διʼ αὐτοῦ ἐγένετο, καὶ χωρὶς αὐτοῦ ἐγένετο οὐδὲ ἕν. ὃ γέγονεν \"    \"ἐν αὐτῷ ζωὴ ἦν, καὶ ἡ ζωὴ ἦν τὸ φῶς τῶν ἀνθρώπων· \"                     \n#> [5] \"καὶ τὸ φῶς ἐν τῇ σκοτίᾳ φαίνει, καὶ ἡ σκοτία αὐτὸ οὐ κατέλαβεν. \"        \"Ἐγένετο ἄνθρωπος ἀπεσταλμένος παρὰ θεοῦ, ὄνομα αὐτῷ Ἰωάννης· \"\n```\n:::\n\n\n\nNow the matriz package:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n\nlibrary(matriz)\nlit_matrix <- init_matrix()\n\n# Get matriz structure to guide in creating records\nmatriz_names()\n#>                        class\n#> year                 numeric\n#> citation           character\n#> keywords           character\n#> profession         character\n#> electronic           logical\n#> purpose            character\n#> study_design       character\n#> outcome_var        character\n#> predictor_var      character\n#> sample               numeric\n#> dropout_rate         numeric\n#> setting            character\n#> inclusion_criteria character\n#> ethnicity          character\n#> age                  numeric\n#> sex                   factor\n#> income                factor\n#> education          character\n#> measures           character\n#> analysis           character\n#> results            character\n#> limitations        character\n#> implications       character\n#> ethical_concerns   character\n#> biases             character\n#> notes              character\n\n# Start filling out individual record with article info\narticle <- data.frame(year = 2025,\n                citation = \" \",\n                keywords = \" \",\n                profession = \"underwater basket weaver\",\n                electronic = \"YES\",\n                purpose = \"To investigate the depth of the oceans and retireve weaving materials\",\n                study_design = \"ethnography\", \n                outcome_var = \"perceived attitudes towards basket weaving\",\n                predictor_var = NA, \n                sample = \"a small school of clown fish\", \n                setting = \"Italy\",\n                drop_rate = 0.13, \n                inclusion_criteria = \"clow fish in Adriatic Sea\", \n                ehtnicity = \"oceanic\", \n                age = \"0 - 1 year\",\n                sex = \"both\",\n                income = \" \",\n                education = \"none\",\n                measures = \"perceived attitudes\",\n                analysis = \"qualitative\", \n                results = \"no significant differences\",\n                limitations = \"small sample size\", \n                implications = \"clow fish don't like humans taking their homes for their own basket weaving endeavors\",\n                ethical_concerns = \"no informed consent given to school of clown fish\",\n                biases = \"clownfish always try to be funny. Lack of seriounness\",\n                notes = \"more research needed\")\n\n# Add the record to the literature matrix\nlit_matrix <- add_record(lit_matrix, article, .before = 1)\n\n# Update record if mistake was made\nlit_matrix <- update_record(lit_matrix, notes, where = year == 2025, set_to = \"actually, the clow fish don't want us to come back.\")\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}